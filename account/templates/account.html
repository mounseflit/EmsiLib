{% extends 'base.html' %}

{% load static %}

{% block titre %}
{{ utilisateur.username }} Profile
{% endblock titre %}

{% block appcss %}
<link rel="stylesheet" href="{% static 'styles/account.css' %}">
<link rel="stylesheet" href="{% static 'styles/browse.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
{% endblock appcss %}


{% block links %}
<li><a href="http://127.0.0.1:8000/books/#home">Home</a></li>
<li><a href="http://127.0.0.1:8000/books/#mylist">Collection</a></li>
<li><a href="http://127.0.0.1:8000/books/#trend">Trending</a></li>
<li><a href="http://127.0.0.1:8000/books/#cours">Courses</a></li>
<li><a href="http://127.0.0.1:8000/books/#new">Reserved</a></li>
</nav>
<nav class="sub-nav" style="margin-top:10px;">
    <a href="http://127.0.0.1:8000/books/search"><i class="fas fa-search sub-nav-logo"></i></a>
    <a href="{% url 'infos' %}"><i class="fas fa-user-circle sub-nav-logo"></i></a>
    <a href="{%url 'logout'%}"><i class="fas fa-user-times sub-nav-logo"></i></a>
</nav>
{% endblock links %}

{% block content %}
 
    <main class="mnmn">
        <section class="profile-header">

            <div class="profile-details">
                <h2>User Information</h2>
                <div class="profile-ml">
                    <div class="profile-image">
                        <img src="{% static 'images/profile.jpg' %}" alt="User Profile Picture">
                        <button class="change-image-btn"><a class="popup-link">Change Image</a></button>
                    </div>
                    
                    <div class="details">
                    <ul>
                        {% if utilisateur %}
                            <br>
                            <li><strong>Nom d'utilisateur: </strong>{{ utilisateur.username }}</li>
                            <br>
                            <li><strong>Mail: </strong>{{utilisateur.email}}</li>
                            <br>
                        {% endif %}
                    </ul>
                    
                        <br>
                        <button class="edit-profile-button" ><a href="{% url 'update' %}">Edit Profile</a></button>
                        <div id="popup" class="popup">
                            <div class="popup-content">
                                <div class="pop">
                                    <h2>Change Profile Image</h2>
                                    <form>
                                        <input type="file" accept="image/*">
                                        <button type="submit">Save Changes</button>
                                        <button type="cancel" class="cancel-btn" >Cancel</button>
                                    </form>
                                </div>
                            </div>
                          </div></div>
        
                          <script>document.addEventListener("DOMContentLoaded", function() {
                            var popup = document.getElementById("popup");
                            var popupLink = document.querySelector(".popup-link");
                            var closePopup = document.getElementById("close-popup");
                          
                            popupLink.addEventListener("click", function(event) {
                              event.preventDefault();
                              popup.style.display = "block";
                            });
                          
                            closePopup.addEventListener("click", function() {
                              popup.style.display = "none";
                            });
                          });</script>
                    </div>
                </div>
            </div>
            
        </section>
    </main><BR>
    {% endblock content %}